var NavMenu=function(){function e(){o.click(function(){s.hasClass("open")?r():a()})}function t(){underlay.click(function(){r()})}function a(){s.addClass("open"),i.css("display","block")}function r(){s.removeClass("open"),i.css("display","none")}function n(){i=$("menu"),o=$("button.hamburger"),underlay=$("menu .underlay"),e(),t()}var o,i,s=$("header.navmenu");!function(){s&&s.load("/templates/navmenu.tpl.html",function(){n()})}();return{}}(),ErrorModal=function(){function e(){a=$(".errormodal"),r=$(".errormodal .message"),n=$(".errormodal .dismiss"),n.click(function(){r.empty()})}function t(e){r.text(e),a.modal("show")}var a,r,n,o=$(".errormodalcontainer");!function(){o&&o.load("/templates/errormodal.tpl.html",function(){e()})}();return{populateMessage:t}}(),FooterLinks=function(){function e(){$(".group").each(function(){$(this).click(function(){t(this)})})}function t(e){"none"===$(e).find("a").css("display")?$(e).find("a").css("display","block"):$(e).find("a").css("display","none")}var a=$("footer.footerlinks");!function(){a&&a.load("/templates/footerlinks.tpl.html",function(){e()})}();return{}}(),PhotoUpload=function(){function e(){p.click(function(){f.click()})}function t(){f=$(".photowidget .photoinput"),d=$(".photowidget .photobox"),p=$(".photobox img"),e(),a()}function a(){f.change(function(e){w=this.files[0];var t=window.location.href.split("/")[3];"clients"===t&&r(n,150,!0),"register"===t&&r(n,200,!1)})}function r(e,t,a){var r=new FileReader;r.onload=function(r){var n=new DataView(r.target.result);if(65496!=n.getUint16(0,!1))return h=-2,e(t,a);for(var o=n.byteLength,i=2;i<o;){var s=n.getUint16(i,!1);if(i+=2,65505==s){if(1165519206!=n.getUint32(i+=2,!1))return h=-1,e(t,a);var c=18761==n.getUint16(i+=6,!1);i+=n.getUint32(i+4,c);var l=n.getUint16(i,c);i+=2;for(var g=0;g<l;g++)if(274==n.getUint16(i+12*g,c))return h=n.getUint16(i+12*g+8,c),e(t,a)}else{if(65280!=(65280&s))break;i+=n.getUint16(i,!1)}}return h=-1,e(t,a)},r.readAsArrayBuffer(w)}function n(e,t){var a=document.createElement("canvas"),r=a.getContext("2d"),g=new Image;g.onload=function(){var u=g.width/g.height;if(1==h||"undefined"==typeof orentation)var f=o(e,u);if(3==h)var f=s(e,u);if(6==h)var f=i(e,u);if(8==h)var f=c(e,u);a.width=f.canvasW,a.height=f.canvasH,r.rotate(f.rotate),r.translate(f.translateX,f.translateY),r.save(),r.drawImage(g,0,0,f.drawImgX,f.drawImgY),r.restore(),!1===t&&(m=a.toDataURL(),l(m)),!0===t&&(v=a.toDataURL(),n(500,!1))},g.src=URL.createObjectURL(w)}function o(e,t){return{canvasW:e*t,canvasH:e,drawImgX:e*t,drawImgY:e,rotate:0,translateX:0,translateY:0}}function i(e,t){return{canvasW:e,canvasH:e*t,drawImgX:e*t,drawImgY:e,rotate:90*Math.PI/180,translateX:0,translateY:-e}}function s(e,t){return{canvasW:e*t,canvasH:e,drawImgX:e*t,drawImgY:e,rotate:180*Math.PI/180,translateX:-e*t,translateY:-e}}function c(e,t){return{canvasW:e,canvasH:e*t,drawImgX:e*t,drawImgY:e,rotate:-90*Math.PI/180,translateX:-e*t,translateY:0}}function l(e){p.attr("src",e)}function g(){return m}function u(){return v}var f,d,p,m,v,h,w,k=$(".photowidget");!function(){k&&k.load("/templates/photoupload.tpl.html",function(){t()})}();return{getResizedImage:g,getResizedAvatar:u,showImage:l}}(),Register=function(){function e(){var e=document.getElementById("salon");new google.maps.places.Autocomplete(e)}function t(){if("hairbeta"===c.val()){var e=new FormData;e.append("avatar",PhotoUpload.getResizedImage()),e.append("firstname",a.val()),e.append("lastname",r.val()),e.append("phone",i.val()),e.append("password",o.val()),e.append("email",n.val()),e.append("salon",s.val());var t={async:!0,crossDomain:!0,url:apiurl+"register",method:"POST",headers:{"cache-control":"no-cache"},processData:!1,contentType:!1,mimeType:"multipart/form-data",data:e,statusCode:{200:function(e,t){d.modal("show")},400:function(e,t){ErrorModal.populateMessage(e.responseText)},401:function(e,t){ErrorModal.populateMessage(e.responseText)},500:function(e,t){ErrorModal.populateMessage("Hairbrain isn't working right now. Please try again later.")}}};$.ajax(t)}else ErrorModal.populateMessage("Beta keyword incorrect.")}var a=($(".registerpage .registerform"),$(".registerpage .registerform .firstname")),r=$(".registerpage .registerform .lastname"),n=$(".registerpage .registerform .email"),o=$(".registerpage .registerform .password"),i=$(".registerpage .registerform .phone"),s=$(".registerpage .registerform .salon"),c=($(".registerpage .registerform .photoinput"),$(".registerpage .registerform .keyword")),l=$(".registerpage .registerform .next"),g=$(".registerpage .registerform .back"),u=$(".registerpage .registerform .submit"),f=$(".registerpage .registerform .sliderbox"),d=$(".registerpage .successmodal"),p=$(".registerpage .login");u.click(function(){t()}),p.click(function(){location.href=location.origin+"/login/"}),l.click(function(){var e=-(f.width()/2-20);f.animate({left:e},500)}),g.click(function(){f.animate({left:20},500)});!function(){google.maps.event.addDomListener(window,"load",e)}();return{}}();