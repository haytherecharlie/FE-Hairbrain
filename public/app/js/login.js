var NavMenu=function(){function n(){r.click(function(){s.hasClass("open")?e():a()})}function o(){underlay.click(function(){e()})}function a(){s.addClass("open"),i.css("display","block")}function e(){s.removeClass("open"),i.css("display","none")}function t(){i=$("menu"),r=$("button.hamburger"),underlay=$("menu .underlay"),n(),o()}var r,i,s=$("header.navmenu");!function(){s&&s.load("/templates/navmenu.tpl.html",function(){t()})}();return{}}(),ErrorModal=function(){function n(){a=$(".errormodal"),e=$(".errormodal .message"),t=$(".errormodal .dismiss"),t.click(function(){e.empty()})}function o(n){e.text(n),a.modal("show")}var a,e,t,r=$(".errormodalcontainer");!function(){r&&r.load("/templates/errormodal.tpl.html",function(){n()})}();return{populateMessage:o}}(),Login=function(){function n(n){var a={id:n.id,name:n.name,phone:n.phone,email:n.email,salon:n.salon,avatar:n.avatar};sessionStorage.setItem("user",JSON.stringify(a)),$.cookie("jwt",n.token,{expires:7,path:"/"}),o(/clients/)}function o(n){window.location.href=window.location.origin+n}function a(){var o=new FormData;o.append("phone",r.val()),o.append("password",i.val());var a={async:!0,crossDomain:!0,url:apiurl+"login",method:"POST",headers:{"cache-control":"no-cache"},processData:!1,contentType:!1,mimeType:"multipart/form-data",data:o,statusCode:{200:function(o,a){n(JSON.parse(o))},400:function(n,o){ErrorModal.populateMessage(n.responseText)},401:function(n,o){ErrorModal.populateMessage(n.responseText)},500:function(n,o){ErrorModal.populateMessage("Hairbrain isn't working right now. Please try again later.")}}};$.ajax(a)}function e(n){var a={async:!0,crossDomain:!0,url:apiurl+"check",method:"GET",headers:{"cache-control":"no-cache",Authorization:"Bearer "+n},processData:!1,contentType:!1,mimeType:"multipart/form-data",statusCode:{200:function(n,a){o(/clients/)},401:function(n,o){},500:function(n,o){ErrorModal.populateMessage("Hairbrain isn't working right now. Please try again later.")}}};$.ajax(a)}var t=$(".loginform"),r=$(".loginphone"),i=$(".loginpassword");$(".loginfailed"),$(".loginbutton");t.submit(function(n){n.preventDefault(),a()});!function(){$.cookie("jwt")&&e($.cookie("jwt"))}();return{}}();