var NavMenu=function(){function o(){r.click(function(){c.hasClass("open")?a():e()})}function n(){underlay.click(function(){a()})}function e(){c.addClass("open"),i.css("display","block")}function a(){c.removeClass("open"),i.css("display","none")}function t(){i=$("menu"),r=$("button.hamburger"),underlay=$("menu .underlay"),o(),n()}var r,i,c=$("header.navmenu");!function(){c&&c.load("/templates/navmenu.tpl.html",function(){t()})}();return{}}(),ErrorModal=function(){function o(){e=$(".errormodal"),a=$(".errormodal .message"),t=$(".errormodal .dismiss"),t.click(function(){a.empty()})}function n(o){a.text(o),e.modal("show")}var e,a,t,r=$(".errormodalcontainer");!function(){r&&r.load("/templates/errormodal.tpl.html",function(){o()})}();return{populateMessage:n}}(),Login=function(){function o(o){$.cookie("jwt",o.token,{expires:7,path:"/"}),$.cookie("userid",o.id,{expires:7,path:"/"}),$.cookie("name",o.name,{expires:7,path:"/"}),$.cookie("phone",o.phone,{expires:7,path:"/"}),$.cookie("email",o.email,{expires:7,path:"/"}),$.cookie("salon",o.salon,{expires:7,path:"/"}),n(/clients/)}function n(o){window.location.href=window.location.origin+o}function e(){var n=new FormData;n.append("phone",r.val()),n.append("password",i.val());var e={async:!0,crossDomain:!0,url:apiurl+"login",method:"POST",headers:{"cache-control":"no-cache"},processData:!1,contentType:!1,mimeType:"multipart/form-data",data:n,statusCode:{200:function(n,e){o(JSON.parse(n))},400:function(o,n){ErrorModal.populateMessage(o.responseText)},401:function(o,n){ErrorModal.populateMessage(o.responseText)},500:function(o,n){ErrorModal.populateMessage("Hairbrain isn't working right now. Please try again later.")}}};$.ajax(e)}function a(o){var e={async:!0,crossDomain:!0,url:apiurl+"check",method:"GET",headers:{"cache-control":"no-cache",Authorization:"Bearer "+o},processData:!1,contentType:!1,mimeType:"multipart/form-data",statusCode:{200:function(o,e){n(/clients/)},401:function(o,n){},500:function(o,n){ErrorModal.populateMessage("Hairbrain isn't working right now. Please try again later.")}}};$.ajax(e)}var t=$(".loginform"),r=$(".loginphone"),i=$(".loginpassword");$(".loginfailed"),$(".loginbutton");t.submit(function(o){o.preventDefault(),e()});!function(){$.cookie("jwt")&&a($.cookie("jwt"))}();return{}}();