var NavMenu=function(){function n(){i.click(function(){s.hasClass("open")?t():o()})}function e(){underlay.click(function(){t()})}function o(){s.addClass("open"),c.css("display","block")}function t(){s.removeClass("open"),c.css("display","none")}function a(){c=$("menu"),i=$("button.hamburger"),underlay=$("menu .underlay"),n(),e()}var i,c,s=$("header.navmenu");!function(){s&&s.load("/templates/navmenu.tpl.html",function(){a()})}()}(),Login=function(){function n(){p.css("opacity","1")}function e(){l.prop("disabled",!0)}function o(){l.prop("disabled",!1)}function t(n){$.cookie("jwt",n.token,{expires:7,path:"/"}),$.cookie("userid",n.id,{expires:7,path:"/"}),$.cookie("name",n.name,{expires:7,path:"/"}),$.cookie("phone",n.phone,{expires:7,path:"/"}),$.cookie("email",n.email,{expires:7,path:"/"}),$.cookie("salon",n.salon,{expires:7,path:"/"}),a(/clients/)}function a(n){window.location.href=window.location.origin+n}function i(){var e=new FormData;e.append("phone",r.val()),e.append("password",u.val());var a={async:!0,crossDomain:!0,url:apiurl+"login",method:"POST",headers:{"cache-control":"no-cache"},processData:!1,contentType:!1,mimeType:"multipart/form-data",data:e};$.ajax(a).done(function(n,e){"success"===e&&t(JSON.parse(n))}).fail(function(e){o(),n()})}function c(n){var e={async:!0,crossDomain:!0,url:apiurl+"check",method:"GET",headers:{"cache-control":"no-cache",Authorization:"Bearer "+n},processData:!1,contentType:!1,mimeType:"multipart/form-data"};$.ajax(e).done(function(n,e){"success"===e&&a(/clients/)})}var s=$(".loginform"),r=$('input[name="phone"]'),u=$('input[name="password"]'),l=$('button[name="submit"]'),p=($('button[name="submit"] span'),$(".loading"),$(".failedlogin"));$(s).submit(function(n){n.preventDefault(),e(),i()}),function(){$.cookie("jwt")&&c($.cookie("jwt"))}()}();!function(){var n={$src:"",$dest:"",photoListeners:function(){$(".thumbnail").each(function(){$(this).click(function(){var e=$(this).attr("id");n.$src=$("#"+e),n.$dest=$("#select-"+e),n.$dest.click(),n.photoUploaded()})})},photoUploaded:function(){n.$dest.change(function(e){n.resizeImage(this.files[0])})},resizeImage:function(e){ImageTools.resize(e,{width:320,height:440},function(e,o){n.getPhotoDimensions(e)})},getPhotoDimensions:function(e){var o=new FileReader;o.onload=function(){var t=new Image;t.onload=function(){n.rotatePhoto(t,e)},t.src=o.result},o.readAsDataURL(e)},rotatePhoto:function(e,o){e.height<e.width?(n.$src.removeClass("default"),n.$src.addClass("rotate")):(n.$src.removeClass("rotate"),n.$src.addClass("default")),n.$src.css("background","url("+e.src+") no-repeat center"),n.$src.css("background-size","cover"),console.log(e.src)}};n.photoListeners()}();